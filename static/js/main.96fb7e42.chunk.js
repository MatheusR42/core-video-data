(this["webpackJsonpvtex-data-extractor"]=this["webpackJsonpvtex-data-extractor"]||[]).push([[0],{17:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),s=n.n(a),i=n(6),l=n.n(i),o=n(3),c=n.n(o),u=n(7),m=n(4),d=(n(16),n(5)),f=n(8),b=n(9),h=new(function(){function e(){Object(f.a)(this,e)}return Object(b.a)(e,[{key:"getProductField",value:function(e,t){var n=e.properties;return n&&(n=n.filter((function(e){return e.name==t}))).length>0?n[0].values[0]:null}},{key:"filterSkuDisponibleInProduct",value:function(e,t){var n=this;return e.items.map((function(e,t){return Object(d.a)(Object(d.a)({},e),{},{itemIndex:t})})).filter((function(e){return n.isAvaliableInOneOfSellers(e.sellers)||t}))[0]}},{key:"getFirstSkuAvaliable",value:function(e){var t=this;return e.items.filter((function(e){return t.isAvaliableInOneOfSellers(e.sellers)}))[0]}},{key:"isAvaliableInOneOfSellers",value:function(e){return e.filter((function(e){return e.commertialOffer.AvailableQuantity>0})).length}},{key:"isAvaliable",value:function(e){var t=this;return e.items.filter((function(e){return t.isAvaliableInOneOfSellers(e.sellers)})).length}},{key:"mapInstallments",value:function(e){if(!(e=e.map((function(e){return{NumberOfInstallments:e.NumberOfInstallments,InterestRate:e.InterestRate}}))).length>0)return null;var t=e.filter((function(e){return!e.InterestRate}));return(t.length?t:e).reduce((function(e,t){return e.NumberOfInstallments>t.NumberOfInstallments?e:t})).NumberOfInstallments}},{key:"getNumberOfInstallments",value:function(e){if(e){var t=null;return!e.length>0&&"number"===typeof e?t=e:(e=e.filter((function(e,t){return null!==e})),t=this.mapInstallments(e)),t}}},{key:"getProductField",value:function(e,t){var n=e.properties;return n&&(n=n.filter((function(e){return e.name==t}))).length>0?n[0].values[0]:null}},{key:"numberToReal",value:function(e){return(e=e.toFixed(2).split("."))[0]=e[0].split(/(?=(?:...)*$)/).join("."),e.join(",")}},{key:"getPrincipalImageFromProduct",value:function(e){var t=e.items[0],n=t.images[0].imageUrl;return t.images.forEach((function(e){var t=e.imageText,r=e.imageUrl;"principal"===t&&(n=r)})),n}},{key:"isInCollection",value:function(e,t){return e&&e.productClusters.find((function(e){return e.name===t}))}},{key:"isInArr",value:function(e){return e&&e.properties.find((function(e){return e.values}))}},{key:"isCategory",value:function(e){return e.properties.filter((function(e){return"Categoria"===e.name}))[0].values[0]}},{key:"isfootwear",value:function(e){return e&&e.categories?e.categories.filter((function(e){return"/Cal\xe7ado/T\xeanis/"===e}))[0]:null}},{key:"isBenefits",value:function(e){return e.properties.filter((function(e){return"Benef\xedcios"===e.name}))[0].values}},{key:"isCategoryIsLessThan",value:function(e){var t=e.properties.filter((function(e){return"Categoria"===e.name})),n=t[0].values[0];return"Cross Training"===n?(t[0].values.unshift("CrossTraining"),!0):n.length>=10}},{key:"isDetails",value:function(e){return e.properties.filter((function(e){return"Detalhes do produto"===e.name}))[0].values}},{key:"isHtmlDescription",value:function(e){var t=e.properties.filter((function(e){return"Descri\xe7\xe3o HTML"===e.name}));return t&&t[0]?t[0].values[0]:null}},{key:"getItems",value:function(e){var t=[],n=[];return e.length?(e.forEach((function(r,a){e.indexOf(r)>-1&&("PP"!==r.name&&"U"!==r.name||t.push({originalIndex:a,item:r.name,order:0,sellers:r.sellers[0].commertialOffer.AvailableQuantity}),"P"===r.name&&t.push({originalIndex:a,item:r.name,order:1,sellers:r.sellers[0].commertialOffer.AvailableQuantity}),"M"===r.name&&t.push({originalIndex:a,item:r.name,order:2,sellers:r.sellers[0].commertialOffer.AvailableQuantity}),"G"===r.name&&t.push({originalIndex:a,item:r.name,order:3,sellers:r.sellers[0].commertialOffer.AvailableQuantity}),"GG"===r.name?t.push({originalIndex:a,item:r.name,order:4,sellers:r.sellers[0].commertialOffer.AvailableQuantity}):n.push({originalIndex:a,item:parseFloat(r.name.replace(",",".")),sellers:r.sellers[0].commertialOffer.AvailableQuantity}))})),t.length?t.sort((function(e,t){return e.order-t.order})):n.sort((function(e,t){return e.item-t.item}))):[]}}]),e}());function p(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){var e=(window.URL||window.webkitURL).createObjectURL(this.response),n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)},n.send()}var j=function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(""),l=Object(m.a)(i,2),o=l[0],d=l[1];return Object(r.jsxs)("div",{classname:"App",children:[Object(r.jsx)("h1",{className:"has-text-weight-bold has-text-centered is-size-1",children:"CoreVideoData"}),Object(r.jsx)("p",{className:"has-text-centered",children:"A app to get product data from vtex products urls"}),Object(r.jsx)("section",{className:"section",children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsxs)("p",{children:["To use you need to install and enable this extension: ",Object(r.jsx)("a",{href:"https://chrome.google.com/webstore/detail/cors-unblock/lfhmikememgdcahcdlaciloancbhjino",children:"https://chrome.google.com/webstore/detail/cors-unblock/lfhmikememgdcahcdlaciloancbhjino"})]}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=n.split("\n");t[0]&&Promise.all(t.map(function(){var e=Object(u.a)(c.a.mark((function e(t){var n,r,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new URL(t),e.next=4,fetch(n.origin+"/api/catalog_system/pub/products/search"+n.pathname);case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,s=[],a&&a.length&&a.forEach((function(e){e.items.forEach((function(e){var t=e.sellers,n=e.images.map((function(e){return e.imageUrl})),r=Array.isArray(t)?t[0].commertialOffer:{},a=[];n.forEach((function(t,n){var r=new URL(t),s="".concat(e.nameComplete,"-").concat(n+1,"-").concat(r.pathname.split(".")[r.pathname.split(".").length-1]);p(t,s),a.push(s)})),s.push({dado01:h.numberToReal(r.Price).split(",")[0],dado02:e.nameComplete,dado03:"DE R$ ".concat(h.numberToReal(r.ListPrice)," POR"),dado04:h.numberToReal(r.Price).split(",")[1],dado05:h.numberToReal(r.ListPrice).split(",")[0],dado06:h.numberToReal(r.ListPrice).split(",")[1],imageNames:a})}))})),e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(0),console.log("error"+e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}())).then((function(e){console.log(e);var t=[];e.forEach((function(e){return e.forEach((function(e){return t.push(e)}))})),d(JSON.stringify(t,null,2))}))},children:[Object(r.jsxs)("div",{className:"field",children:[Object(r.jsx)("label",{className:"label",children:"Product URLs(Add one url per line)"}),Object(r.jsx)("div",{className:"control",children:Object(r.jsx)("textarea",{className:"textarea",placeholder:"https://www.cybelar.com.br/berco-confete-plus-em-mdp-3-niveis-de-regulagem-multimoveis/p\nhttps://www.cybelar.com.br/guarda-roupa-star-6-3-solteiro-em-mdp-6p-e-3g-santos-andira/p",onChange:function(e){return s(e.target.value)},value:n})})]}),Object(r.jsx)("div",{className:"field is-grouped",children:Object(r.jsx)("div",{className:"control",children:Object(r.jsx)("button",{className:"button is-link",children:"Submit"})})})]})]})}),Object(r.jsx)("section",{className:"section",children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"dado01:"})," Pre\xe7o Por sem centavos ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"dado02:"})," item.nameComplete ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"dado03:"})," Texto com pre\xe7o formatado ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"dado04:"})," Pre\xe7o Por centavos ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"dado05:"})," Pre\xe7o De sem centavos ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"dado06:"})," Pre\xe7o De centavos ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"imageNames:"})," Nome das imagens ",Object(r.jsx)("br",{})]}),Object(r.jsxs)("div",{className:"field",children:[Object(r.jsx)("label",{className:"label",children:"Result"}),Object(r.jsx)("div",{className:"control",children:Object(r.jsx)("textarea",{className:"textarea",value:o})})]})]})}),Object(r.jsx)("p",{className:"has-text-weight-bold has-text-centered",children:"Criado por: Matheus Araujo, Matheus Fiori e Jefferson Leite"})]})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),s(e),i(e)}))};l.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(j,{})}),document.getElementById("root")),v()}},[[17,1,2]]]);
//# sourceMappingURL=main.96fb7e42.chunk.js.map